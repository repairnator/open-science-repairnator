<html>
<body>
<p><a href="http://travis-ci.org/BME-MIT-IET/MaxPont-iet-2018/builds/381411072" id="travis-url">http://travis-ci.org/BME-MIT-IET/MaxPont-iet-2018/builds/381411072</a></p>
<p><a href="https://github.com/BME-MIT-IET/MaxPont-iet-2018/commit/c15d94e10eb15e19dd5ba4172e275d216c5a6023" id="commit-url">https://github.com/BME-MIT-IET/MaxPont-iet-2018/commit/c15d94e10eb15e19dd5ba4172e275d216c5a6023</a></p>
<pre>NPEFix<code id=" 0" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,26 +198,66 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NullIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
-        while (attGroups.hasNext()) {
-            convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
         }
+        if (attGroups == null) {
+            while ( new NullIterator().hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        } else {
+            while (attGroups.hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        }
 
</code></pre>
<pre>NPEFix<code id=" 1" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,26 +198,66 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NullIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
-        while (attGroups.hasNext()) {
-            convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
         }
+        if (attGroups == null) {
+            while ( new NiceIterator().hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        } else {
+            while (attGroups.hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        }
 
</code></pre>
<pre>NPEFix<code id=" 2" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,23 +198,60 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NullIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            attGroups = new NiceIterator();
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 3" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,23 +198,60 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NullIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            attGroups = new NullIterator();
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 4" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,23 +198,60 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NullIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            return null;
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 5" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,22 +198,57 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NullIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
+        if (schema == null) {
+            return null;
+        }
         Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
</code></pre>
<pre>NPEFix<code id=" 6" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,26 +198,66 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NiceIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
-        while (attGroups.hasNext()) {
-            convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
         }
+        if (attGroups == null) {
+            while ( new NullIterator().hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        } else {
+            while (attGroups.hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        }
 
</code></pre>
<pre>NPEFix<code id=" 7" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,26 +198,66 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NiceIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
-        while (attGroups.hasNext()) {
-            convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
         }
+        if (attGroups == null) {
+            while ( new NiceIterator().hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        } else {
+            while (attGroups.hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        }
 
</code></pre>
<pre>NPEFix<code id=" 8" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,23 +198,60 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NiceIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            attGroups = new NullIterator();
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 9" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,23 +198,60 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NiceIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            attGroups = new NiceIterator();
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 10" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,23 +198,60 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NiceIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            return null;
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 11" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,22 +198,57 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
-        while (groups.hasNext()) {
-            convertModelGroupDecl(groups.next());
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
         }
+        if (groups == null) {
+            while ( new NiceIterator().hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        } else {
+            while (groups.hasNext()) {
+                convertModelGroupDecl(groups.next());
+            }
+        }
 
+        if (schema == null) {
+            return null;
+        }
         Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
</code></pre>
<pre>NPEFix<code id=" 12" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NiceIterator();
+        }
         while (groups.hasNext()) {
@@ -208,6 +247,14 @@
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
-        while (attGroups.hasNext()) {
-            convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
         }
+        if (attGroups == null) {
+            while ( new NiceIterator().hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        } else {
+            while (attGroups.hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        }
 
</code></pre>
<pre>NPEFix<code id=" 13" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NiceIterator();
+        }
         while (groups.hasNext()) {
@@ -208,6 +247,14 @@
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
-        while (attGroups.hasNext()) {
-            convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
         }
+        if (attGroups == null) {
+            while ( new NullIterator().hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        } else {
+            while (attGroups.hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        }
 
</code></pre>
<pre>NPEFix<code id=" 14" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NiceIterator();
+        }
         while (groups.hasNext()) {
@@ -208,3 +247,8 @@
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            attGroups = new NiceIterator();
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 15" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NiceIterator();
+        }
         while (groups.hasNext()) {
@@ -208,3 +247,8 @@
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            attGroups = new NullIterator();
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 16" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NiceIterator();
+        }
         while (groups.hasNext()) {
@@ -208,3 +247,8 @@
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            return null;
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 17" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NiceIterator();
+        }
         while (groups.hasNext()) {
@@ -208,2 +247,5 @@
 
+        if (schema == null) {
+            return null;
+        }
         Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
</code></pre>
<pre>NPEFix<code id=" 18" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NullIterator();
+        }
         while (groups.hasNext()) {
@@ -208,6 +247,14 @@
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
-        while (attGroups.hasNext()) {
-            convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
         }
+        if (attGroups == null) {
+            while ( new NullIterator().hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        } else {
+            while (attGroups.hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        }
 
</code></pre>
<pre>NPEFix<code id=" 19" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NullIterator();
+        }
         while (groups.hasNext()) {
@@ -208,6 +247,14 @@
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
-        while (attGroups.hasNext()) {
-            convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
         }
+        if (attGroups == null) {
+            while ( new NiceIterator().hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        } else {
+            while (attGroups.hasNext()) {
+                convertAttributeGroup((XSAttGroupDecl) attGroups.next());
+            }
+        }
 
</code></pre>
<pre>NPEFix<code id=" 20" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NullIterator();
+        }
         while (groups.hasNext()) {
@@ -208,3 +247,8 @@
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            attGroups = new NiceIterator();
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 21" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NullIterator();
+        }
         while (groups.hasNext()) {
@@ -208,3 +247,8 @@
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            attGroups = new NullIterator();
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 22" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NullIterator();
+        }
         while (groups.hasNext()) {
@@ -208,3 +247,8 @@
 
-        Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
+        }
+        if (attGroups == null) {
+            return null;
+        }
         while (attGroups.hasNext()) {
</code></pre>
<pre>NPEFix<code id=" 23" class="patch" title="NPEFix">
--- /XSD2OWLMapper.java
+++ /XSD2OWLMapper.java
@@ -166,7 +166,17 @@
         try {
-            URI uri = new URI(schema.getTargetNamespace());
-            if (uri.isAbsolute()) {
-                mainURI = schema.getTargetNamespace();
+            if (schema != null) {
+                URI uri = new URI(schema.getTargetNamespace());
+            }
+            if (uri == null) {
+                if ( new URI(null, null, null).isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             } else {
-                mainURI = &quot;http://uri-not-absolute.com&quot;;
+                if (uri.isAbsolute()) {
+                    mainURI = schema.getTargetNamespace();
+                } else {
+                    mainURI = &quot;http://uri-not-absolute.com&quot;;
+                }
             }
@@ -188,18 +198,47 @@
     public void convertXSD2OWL() {
-        Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
-        while (simpleTypes.hasNext()) {
-            convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSSimpleType&gt; simpleTypes = schema.iterateSimpleTypes();
         }
+        if (simpleTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        } else {
+            while (simpleTypes.hasNext()) {
+                convertSimpleType((XSSimpleType) simpleTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
-        while (complexTypes.hasNext()) {
-            convertComplexType((XSComplexType) complexTypes.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSComplexType&gt; complexTypes = schema.iterateComplexTypes();
         }
+        if (complexTypes == null) {
+            while ( new NullIterator().hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        } else {
+            while (complexTypes.hasNext()) {
+                convertComplexType((XSComplexType) complexTypes.next(), null);
+            }
+        }
 
-        Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
-        while (elements.hasNext()) {
-            convertElement((XSElementDecl) elements.next(), null);
+        if (schema != null) {
+            Iterator&lt;XSElementDecl&gt; elements = schema.iterateElementDecls();
         }
+        if (elements == null) {
+            while ( new NullIterator().hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        } else {
+            while (elements.hasNext()) {
+                convertElement((XSElementDecl) elements.next(), null);
+            }
+        }
 
-        Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        if (schema != null) {
+            Iterator&lt;XSModelGroupDecl&gt; groups = schema.iterateModelGroupDecls();
+        }
+        if (groups == null) {
+            groups = new NullIterator();
+        }
         while (groups.hasNext()) {
@@ -208,2 +247,5 @@
 
+        if (schema == null) {
+            return null;
+        }
         Iterator&lt;XSAttGroupDecl&gt; attGroups = schema.iterateAttGroupDecls();
</code></pre>
</body>
</html>
