<html>
<body>
<p><a href="http://travis-ci.org/IQSS/dataverse/builds/382837905" id="travis-url">http://travis-ci.org/IQSS/dataverse/builds/382837905</a></p>
<p><a href="https://github.com/IQSS/dataverse/commit/e998f927f8fa221b1f909ff2251f0c9ad4edbe4a" id="commit-url">https://github.com/IQSS/dataverse/commit/e998f927f8fa221b1f909ff2251f0c9ad4edbe4a</a></p>
<pre>NPEFix<code id=" 0" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 1" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 2" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( edu.harvard.iq.dataverse.GlobalId.HDL_PROTOCOL.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 3" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( edu.harvard.iq.dataverse.GlobalId.HDL_PROTOCOL.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 4" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( edu.harvard.iq.dataverse.GlobalId.HDL_PROTOCOL.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 5" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( identifierString.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 6" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( identifierString.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 7" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( identifierString.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 8" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( edu.harvard.iq.dataverse.GlobalId.HDL_RESOLVER_URL.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 9" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( edu.harvard.iq.dataverse.GlobalId.HDL_RESOLVER_URL.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 10" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( edu.harvard.iq.dataverse.GlobalId.HDL_RESOLVER_URL.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 11" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( edu.harvard.iq.dataverse.GlobalId.DOI_RESOLVER_URL.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 12" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( edu.harvard.iq.dataverse.GlobalId.DOI_RESOLVER_URL.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 13" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( edu.harvard.iq.dataverse.GlobalId.DOI_RESOLVER_URL.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 14" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = protocol;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 15" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = protocol;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 16" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = edu.harvard.iq.dataverse.GlobalId.HDL_PROTOCOL;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 17" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = edu.harvard.iq.dataverse.GlobalId.HDL_PROTOCOL;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 18" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = edu.harvard.iq.dataverse.GlobalId.HDL_PROTOCOL;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 19" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = identifierString;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 20" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = identifierString;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 21" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = identifierString;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 22" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = edu.harvard.iq.dataverse.GlobalId.HDL_RESOLVER_URL;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 23" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = edu.harvard.iq.dataverse.GlobalId.HDL_RESOLVER_URL;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 24" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = edu.harvard.iq.dataverse.GlobalId.HDL_RESOLVER_URL;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 25" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = edu.harvard.iq.dataverse.GlobalId.DOI_RESOLVER_URL;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 26" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = edu.harvard.iq.dataverse.GlobalId.DOI_RESOLVER_URL;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 27" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = edu.harvard.iq.dataverse.GlobalId.DOI_RESOLVER_URL;
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 28" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( new String().equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 29" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( new String().equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 30" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,5 +138,15 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
-                    if (!this.checkDOIAuthority(this.authority)) {
-                        return false;
+                } else {
+                    if (this.protocol == null) {
+                        if ( new String().equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
+                    } else {
+                        if (this.protocol.equals(DOI_PROTOCOL)) {
+                            if (!this.checkDOIAuthority(this.authority)) {
+                                return false;
+                            }
+                        }
                     }
</code></pre>
<pre>NPEFix<code id=" 31" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = new String();
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 32" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = new String();
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
<pre>NPEFix<code id=" 33" class="patch" title="NPEFix">
--- /GlobalId.java
+++ /GlobalId.java
@@ -138,3 +138,7 @@
                 }
-                if (this.protocol.equals(DOI_PROTOCOL)) {
+                } else {
+                    if (this.protocol == null) {
+                        this.protocol = new String();
+                    }
+                    if (this.protocol.equals(DOI_PROTOCOL)) {
                     if (!this.checkDOIAuthority(this.authority)) {
@@ -143,2 +147,3 @@
                 }
+                }
                 // Passed all checks
</code></pre>
</body>
</html>
